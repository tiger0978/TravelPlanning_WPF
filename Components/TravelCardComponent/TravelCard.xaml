<UserControl x:Class="TravelPlanning.Components.TravelCardComponent.TravelCard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             mc:Ignorable="d" 
             Height="340" 
             Width="296"
             Cursor="Hand">
    
    <UserControl.Resources>
        <!-- 懸停動畫 -->
        <Storyboard x:Key="MouseEnterStoryboard">
            <DoubleAnimation Storyboard.TargetName="CardBorder"
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                           To="1.03" Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="CardBorder"
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                           To="1.03" Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="ImageOverlay"
                           Storyboard.TargetProperty="Opacity"
                           To="0.3" Duration="0:0:0.2"/>
            <ThicknessAnimation Storyboard.TargetName="InfoPanel"
                              Storyboard.TargetProperty="Margin"
                              To="16,12,16,16" Duration="0:0:0.2">
                <ThicknessAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </ThicknessAnimation.EasingFunction>
            </ThicknessAnimation>
        </Storyboard>
        
        <Storyboard x:Key="MouseLeaveStoryboard">
            <DoubleAnimation Storyboard.TargetName="CardBorder"
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                           To="1.0" Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="CardBorder"
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                           To="1.0" Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="ImageOverlay"
                           Storyboard.TargetProperty="Opacity"
                           To="0" Duration="0:0:0.2"/>
            <ThicknessAnimation Storyboard.TargetName="InfoPanel"
                              Storyboard.TargetProperty="Margin"
                              To="16,16,16,16" Duration="0:0:0.2">
                <ThicknessAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </ThicknessAnimation.EasingFunction>
            </ThicknessAnimation>
        </Storyboard>
    </UserControl.Resources>
    
    <UserControl.Triggers>
        <EventTrigger RoutedEvent="MouseEnter">
            <BeginStoryboard Storyboard="{StaticResource MouseEnterStoryboard}"/>
        </EventTrigger>
        <EventTrigger RoutedEvent="MouseLeave">
            <BeginStoryboard Storyboard="{StaticResource MouseLeaveStoryboard}"/>
        </EventTrigger>
    </UserControl.Triggers>
    
    <Border x:Name="CardBorder" 
            Background="#1E1E1E"
            CornerRadius="12"
            RenderTransformOrigin="0.5,0.5">
        <Border.RenderTransform>
            <ScaleTransform ScaleX="1" ScaleY="1"/>
        </Border.RenderTransform>
        
        <Border.Effect>
            <DropShadowEffect Color="#000000" 
                            Direction="270" 
                            ShadowDepth="4" 
                            BlurRadius="16" 
                            Opacity="0.4"/>
        </Border.Effect>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="190"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- 圖片區域 -->
            <Grid Grid.Row="0" ClipToBounds="True">
                <Border CornerRadius="12,12,0,0">
                    <Image Source="{Binding Cover}" 
                           Stretch="UniformToFill"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"/>
                </Border>
                
                <!-- 懸停遮罩 -->
                <Border x:Name="ImageOverlay"
                        Background="#000000"
                        Opacity="0"
                        CornerRadius="12,12,0,0"/>
                
                <!-- 播放圖示 (類似 YouTube) -->
                <Viewbox Width="56" Height="56" 
                         HorizontalAlignment="Center" 
                         VerticalAlignment="Center"
                         Opacity="0.9">
                    <ui:SymbolIcon Symbol="Play24" 
                                   Foreground="White"
                                   FontSize="32"/>
                </Viewbox>
                
                <!-- 右上角標籤 -->
                <Border Background="#1976D2"
                        CornerRadius="4"
                        Padding="8,4"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Margin="12">
                    <TextBlock Text="精選"
                               Foreground="White"
                               FontSize="11"
                               FontWeight="SemiBold"/>
                </Border>
            </Grid>
            
            <!-- 資訊區域 -->
            <StackPanel x:Name="InfoPanel" 
                       Grid.Row="1" 
                       Margin="16,16,16,16"
                       Orientation="Vertical">
                
                <!-- 標題 -->
                <TextBlock Text="{Binding Title}"
                          FontSize="15"
                          FontWeight="SemiBold"
                          Foreground="#E0E0E0"
                          TextWrapping="Wrap"
                          MaxHeight="42"
                          LineHeight="21"
                          TextTrimming="CharacterEllipsis"
                          Margin="0,0,0,8"/>
                
                <!-- 日期與資訊 -->
                <StackPanel Orientation="Horizontal" 
                           VerticalAlignment="Center"
                           Margin="0,0,0,8">
                    <ui:SymbolIcon Symbol="CalendarLtr24"
                                   FontSize="14"
                                   Foreground="#999999"
                                   Margin="0,0,6,0"/>
                    <TextBlock Text="{Binding TravelDate}"
                              FontSize="12"
                              Foreground="#999999"
                              VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- 額外資訊 -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="12"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <ui:SymbolIcon Symbol="Location24" 
                                       FontSize="13"
                                       Foreground="#888888"
                                       Margin="0,0,4,0"/>
                        <TextBlock Text="台灣"
                                  FontSize="11"
                                  Foreground="#888888"
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <ui:SymbolIcon Symbol="Star24" 
                                       FontSize="13"
                                       Foreground="#FFC107"
                                       Margin="0,0,4,0"/>
                        <TextBlock Text="4.8"
                                  FontSize="11"
                                  Foreground="#888888"
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>